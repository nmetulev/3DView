<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <title>Babylon.js sample code</title>

    <!-- Babylon.js -->
    <script src="babylon_p.max.js"></script>
    <script src="babylon.glTFFileLoader.js"></script>

    <style>
        html, body {
            overflow: hidden;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }

        #renderCanvas {
            width: 100%;
            height: 100%;
            touch-action: none;
        }
    </style>
</head>
<body>
    <canvas id="renderCanvas"></canvas>
    <script>
        console.log("test");
        (async function () {
            function MyLoadingScreen( /* variables needed, for example:*/ text) {
                //init the loader
                this.loadingUIText = text;
                this.displayLoadingUI = false;
            }


            var canvas = document.getElementById("renderCanvas");
            var engine = new BABYLON.Engine(canvas, true);
            BABYLON.SceneLoader.ShowLoadingScreen = false;

            console.log("test2");

            var createScene = async function () {
                console.log("test3");
                // set scene and camera
                var scene = new BABYLON.Scene(engine);
                //var camera = new BABYLON.ArcRotateCamera("camera", getRadianFromDegree(90), getRadianFromDegree(90), 1, new BABYLON.Vector3(0, 0, 0), scene);
                //camera.checkCollisions = true;
                var camera = new BABYLON.FreeCamera("camera1", new BABYLON.Vector3(0, 0, 1.5), scene);
                camera.setTarget(BABYLON.Vector3.Zero());
                // load the assets
                var rootUrl = './';
                var fileName = 'poop.glb';
                BABYLON.SceneLoader.Append(rootUrl, fileName, scene, function (newScene) {
                    newScene.rotation = new BABYLON.Vector3(0, 90, 0);
                });
                console.log("tes4");

                // This creates a light, aiming 0,1,0 - to the sky (non-mesh)
                var light = new BABYLON.HemisphericLight("light1", new BABYLON.Vector3(0, 1, 0), scene);

                // Default intensity is 1. Let's dim the light a small amount
                light.intensity = 0.7;

                //scene.createDefaultEnvironment();
                scene.clearColor = new BABYLON.Color4(0, 0, 0, 0);

                return scene;
            };

            function getRadianFromDegree(deg) {
                return deg / 180 * Math.PI;
            }

            var scene = await createScene()

            engine.runRenderLoop(function () {
                scene.render();
            });

            // Resize
            window.addEventListener("resize", function () {
                engine.resize();
            });
        })();

    </script>
</body>
</html>
